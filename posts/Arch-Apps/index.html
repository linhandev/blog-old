<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Arch常用软件" /><meta name="author" content="Lin Han" /><meta property="og:locale" content="en" /><meta name="description" content="这篇记录一些 Arch Linux 常用的软件和设置，用于在安装完成后进行设置。" /><meta property="og:description" content="这篇记录一些 Arch Linux 常用的软件和设置，用于在安装完成后进行设置。" /><link rel="canonical" href="https://linhandev.github.io//posts/Arch-Apps/" /><meta property="og:url" content="https://linhandev.github.io//posts/Arch-Apps/" /><meta property="og:site_name" content="Lin’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-13T18:27:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Arch常用软件" /><meta name="twitter:site" content="@linhandev" /><meta name="twitter:creator" content="@Lin Han" /><meta name="google-site-verification" content="StdaX-aj1Cn6KORrAbSA-lotFcfC2BiWqXKNNjjDrYY" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Lin Han"},"dateModified":"2022-09-15T01:50:53+08:00","datePublished":"2021-12-13T18:27:00+08:00","description":"这篇记录一些 Arch Linux 常用的软件和设置，用于在安装完成后进行设置。","headline":"Arch常用软件","mainEntityOfPage":{"@type":"WebPage","@id":"https://linhandev.github.io//posts/Arch-Apps/"},"url":"https://linhandev.github.io//posts/Arch-Apps/"}</script><title>Arch常用软件 | Lin's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Lin's Blog"><meta name="application-name" content="Lin's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://linhandev.github.io/assets/img/avatar.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Lin's Blog</a></div><div class="site-subtitle font-italic">Coder by Choice</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/linhandev" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/linhandev" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['me','linhan.email'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Arch常用软件</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Arch常用软件</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/linhandev">Lin</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1639391220" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2021-12-13 </em> </span> <span> Updated <em class="timeago" data-ts="1663177853" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-14 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4156 words"> <em>23 min</em> read</span></div></div></div><div class="post-content"><p>这篇记录一些 Arch Linux 常用的软件和设置，用于在安装完成后进行设置。</p><h1 id="btrfs">btrfs</h1><p>如果用了 btrfs 可以考虑保留一个刚安装完系统的快照。这里默认子卷的结构按照<a href="https://linhandev.github.io/posts/Arch-install/#btrfs">安装教程</a>。snapper 默认要用 dbus，如果还在 chroot 里需要重启进系统跑下面的命令。</p><p><img data-src="https://user-images.githubusercontent.com/29757093/155235420-f2d24eec-2e0c-4bc3-a0f6-e789eba1e6d8.png" alt="image" data-proofer-ignore></p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>su root
pacman <span class="nt">-S</span> snapper
umount /.snapshots
<span class="nb">rm</span> <span class="nt">-rf</span> /.snapshots
snapper <span class="nt">-c</span> root create-config /
vim /etc/snapper/configs/root
<span class="c"># ALLOW_USERS='[用户名]'</span>
<span class="c"># todo 最后的期限限制</span>
<span class="nb">chmod </span>a+rx /.snapshots <span class="c"># 让所有用户对镜像都有读写权限</span>

systemctl start snapper-timeline.timer
systemctl <span class="nb">enable </span>snapper-timeline.timer
systemctl start snapper-cleanup.timer
systemctl <span class="nb">enable </span>snapper-cleanup.timer
systemctl start grub-btrfs.path <span class="c"># 开机grub里可以选重启到哪个快照</span>
systemctl <span class="nb">enable </span>grub-btrfs.path

snapper <span class="nt">-c</span> root list
snapper <span class="nt">-c</span> root create <span class="nt">--description</span> BeforeGui
</pre></table></code></div></div><p>快照会创建在/.snapshot 路径下，下面文件夹名字是这个快照的编号</p><p><img data-src="https://user-images.githubusercontent.com/29757093/155236257-7c9becf3-2ab6-42a2-b561-25a742fc9ffa.png" alt="image" data-proofer-ignore></p><p>可以看到虽然快照下有 home 目录，/home 里面也有东西，但是快照里 home 是空的。</p><p>全系统 rollback。Arch 推荐从启动盘进行全系统 rollback，首先重启进入启动盘</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>mount /dev/[btrfs的任意一个分区] /mnt
less /mnt/@snapshots/<span class="k">*</span>/info.xml <span class="c"># 查看所有镜像的信息</span>
<span class="c"># 下面需要删除当前的文件，可以把当前的文件mv到另一个地方，我一般直接删除</span>
<span class="c"># mv /mnt/@ /mnt/@.old</span>
<span class="nb">rm</span> <span class="nt">-rf</span> /mnt/@
btrfs subvol snapshot /mnt/@.snapshots/[要rollback到的snapshot编号]/snapshot /mnt/@
reboot
</pre></table></code></div></div><h1 id="权限">权限</h1><p>sudo 使用非常广泛，但是通常在个人电脑的场景下 sudo 的用途只是让一个用户可以作为 root 执行命令，就这个使用场景来说 sudo 比较杀鸡用牛刀。doas 不一定比 sudo 安全，但是精简很多</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>su root
pacman <span class="nt">-S</span> opendoas
<span class="c"># 允许 用户名 作为root执行命令，persist是一次输入密码之后一段时间内不会重新要密码</span>
<span class="nb">echo</span> <span class="s2">"permit persist [用户名] as root"</span> <span class="o">&gt;&gt;</span> /etc/doas.conf
<span class="c"># 用 doas 替换 sudo</span>
<span class="nb">mv</span> /usr/bin/sudo /usr/bin/sudo-bk
<span class="nb">ln</span> <span class="nt">-s</span> /usr/bin/doas /usr/bin/sudo
<span class="nb">exit
</span>doas <span class="nb">ls</span> <span class="c"># 测试配置是否正确</span>
</pre></table></code></div></div><p>如果一些程序依赖 sudo，用 doas 不行可以通过修改 /usr/bin/sudo 软链接或者直接重装 sudo 进行暂时恢复。</p><h1 id="包管理">包管理</h1><h2 id="yay"><span class="mr-2">yay</span><a href="#yay" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>yay 是个很有用的包管理工具，使用方法跟 Arch 自带的 pacman 基本完全相同，主要是加入了对 AUR 的支持。在 AUR 里基本能找到所有常用的软件。下面的命令安装 yay</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nb">cd
</span>doas pacman <span class="nt">-Syyu</span> <span class="c"># 全系统更新</span>
doas pacman <span class="nt">-S</span> git base-devel
git clone https://aur.archlinux.org/yay.git <span class="c"># 下载yay代码</span>
<span class="nb">cd </span>yay
makepkg <span class="nt">-si</span> <span class="c"># 编译并安装</span>
yay <span class="c"># 更新所有的包，测试安装</span>

doas vim /etc/makepkg.conf <span class="c"># 把 PKGEXT .pkg.tar 后面的 .zst 或者 .xz 之类的后缀去掉，这样本地编译的包不需要压缩直接安装，快一些</span>
</pre></table></code></div></div><p>本地编译代码通常都需要 base-devel。如果从源码编译的过程中报一些类似缺少 fakeroot，build utils 之类的错，跑下面的命令装一下</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> base-devel
</pre></table></code></div></div><p>基本用法，注意包名是区分大小写的，一般都是小写</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>yay package_name <span class="c"># 不写 -S 的时候是进行搜索，从搜索结果中选具体装哪个</span>
yay <span class="nt">-S</span> pkg_name <span class="c"># 写 -S 和 pacman 一样是直接安装这个包</span>
yay <span class="nt">-R</span> pkg_name <span class="c"># 删除一个包</span>
yay <span class="nt">-Q</span> <span class="c"># 列出所有已安装的包</span>
yay <span class="nt">-Q</span> | <span class="nb">grep </span>pacma<span class="k">*</span> <span class="c"># -Q应该是不支持通配符，用 grep 和 * 比较方便</span>
</pre></table></code></div></div><h2 id="镜像测速"><span class="mr-2">镜像测速</span><a href="#镜像测速" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>全球有很多 pacman 软件库的镜像，选一个快的能节省不少下载时间。reflector 可以按速度对镜像排序，也可以定时执行</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> reflector rsync curl
doas <span class="nb">cp</span> /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.bak
doas reflector <span class="nt">--latest</span> 20 <span class="nt">--country</span> China <span class="nt">--protocol</span> https <span class="nt">--sort</span> rate <span class="nt">--save</span> /etc/pacman.d/mirrorlist
</pre></table></code></div></div><p>一般镜像的速度不会变得很频繁，但是 reflector 也是可以定时更新镜像列表的。首先把参数写入配置文件</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"""
--latest 20
--country China
--protocol https
--sort rate
--save /etc/pacman.d/mirrorlist
"""</span> | doas <span class="nb">tee</span> /etc/xdg/reflector/reflector.conf
doas systemctl <span class="nb">enable </span>reflector
doas systemctl start reflector.timer
doas systemctl <span class="nb">enable </span>reflector.timer
</pre></table></code></div></div><p>默认配置是每周执行一次，可以在配置文件里指定这个周期，比如把 OnCalendar 改成 daily，之后需要重新加载配置文件</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>doas vim /usr/lib/systemd/system/reflector.timer
doas systemctl daemon-reload
doas systemctl status reflector.timer <span class="c"># Trigger: 可以看到还有多久下次执行</span>
</pre></table></code></div></div><p><img data-src="https://user-images.githubusercontent.com/29757093/152112943-c3214b28-4915-46d7-9f3d-e5ba63e33584.png" alt="image" data-proofer-ignore></p><h1 id="密码管理">密码管理</h1><p><a href="https://www.passwordstore.org/">pass</a>是一个不错的选择，加密基于 gpg，生态丰富，在不同平台和浏览器上都有 gui 或插件。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> pass <span class="c"># 密码管理工具</span>
yay <span class="nt">-S</span> qtpass <span class="c"># qt图形界面</span>
</pre></table></code></div></div><p>此外<a href="https://github.com/passff/passff">passff</a>是一个在火狐系浏览器中进行自动填充的工具，需要安装火狐插件和一个本地 app。</p><h1 id="浏览器">浏览器</h1><h2 id="firefox"><span class="mr-2">Firefox</span><a href="#firefox" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>LibreWolf 是基于 Firefox 开发的一个关注隐私保护的浏览器，用起来体验和 Firefox 差别不大。默认设置关浏览器就会清 cookie 所以网站会要求重新登陆，结合密码管理工具并不很影响使用体验。大多数 Firefox 的设置都是在的，可以根据自己的需要调整，比如保存浏览历史或者针对一些/所有网站关浏览器不清除 cookie。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> librewolf-bin
</pre></table></code></div></div><h2 id="chrome"><span class="mr-2">Chrome</span><a href="#chrome" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>chromium 阵营的隐私浏览器 Brave 和 Vivaldi 貌似风评都不是很好，有一个开源的选择 ungoogled-chromium。缺点是貌似没有二进制的包，安装和更新都需要编译源码，在我的机器上编译花了 4 个半小时。(很神奇的是整个过程 CPU 8 个核都是 100%但是风扇一直没转 /笑哭 ) 而且 ungoogled-chromium 不是开箱就设置好的，大多数隐私保护设置都需要调，不是很方便。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> ungoogled-chromium
</pre></table></code></div></div><h1 id="中文输入法">中文输入法</h1><p>如果中文都显示成麻将那是缺少中文自体，在系统语言中添加中文</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>doas vi /etc/locale.gen
<span class="c"># 按 / 搜索，输入 zh_CN.UTF8 UTF8，回车找到这一行</span>
<span class="c"># 将这一行前面的 # 去掉</span>
<span class="c"># 输入 :wq 保存并退出</span>

doas locale-gen
</pre></table></code></div></div><p>安装中文字体</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> noto-fonts-cjk
</pre></table></code></div></div><p>安装 fcitx5</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-Rs</span> <span class="si">$(</span>pacman <span class="nt">-Qsq</span> fcitx<span class="si">)</span> <span class="c"># 删除已有fcitx</span>
doas pacman <span class="nt">-S</span> fcitx5 fcitx5-gtk fcitx5-qt fcitx5-configtool fcitx5-chinese-addons
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> ~/.config/fcitx5
</pre></table></code></div></div><p>修改 <code class="language-plaintext highlighter-rouge">~/.config/fcitx5/profile</code></p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="o">[</span>Groups/0]
<span class="c"># Group Name</span>
<span class="nv">Name</span><span class="o">=</span>Default
<span class="c"># Layout</span>
Default <span class="nv">Layout</span><span class="o">=</span>us
<span class="c"># Default Input Method</span>
<span class="nv">DefaultIM</span><span class="o">=</span>pinyin

<span class="o">[</span>Groups/0/Items/0]
<span class="c"># Name</span>
<span class="nv">Name</span><span class="o">=</span>keyboard-us
<span class="c"># Layout</span>
<span class="nv">Layout</span><span class="o">=</span>

<span class="o">[</span>Groups/0/Items/1]
<span class="c"># Name</span>
<span class="nv">Name</span><span class="o">=</span>pinyin
<span class="c"># Layout</span>
<span class="nv">Layout</span><span class="o">=</span>

<span class="o">[</span>GroupOrder]
<span class="nv">0</span><span class="o">=</span>Default
</pre></table></code></div></div><p>对于 wayland 图形系统，在 <code class="language-plaintext highlighter-rouge">~/.pam_environment</code> 中添加</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>GTK_IM_MODULE <span class="nv">DEFAULT</span><span class="o">=</span>fcitx5
QT_IM_MODULE <span class="nv">DEFAULT</span><span class="o">=</span>fcitx5
XMODIFIERS <span class="nv">DEFAULT</span><span class="o">=</span>@im<span class="o">=</span>fcitx5
</pre></table></code></div></div><p>对于 x 图形系统，在 <code class="language-plaintext highlighter-rouge">~/.xprofile</code> 和 <code class="language-plaintext highlighter-rouge">~/.xinitrc</code>中添加</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">XIM</span><span class="o">=</span><span class="s2">"fcitx5"</span>
<span class="nb">export </span><span class="nv">XIM_PROGRAM</span><span class="o">=</span><span class="s2">"/usr/bin/fcitx5"</span>
<span class="nb">export </span><span class="nv">GTK_IM_MODULE</span><span class="o">=</span><span class="s2">"fcitx5"</span>
<span class="nb">export </span><span class="nv">QT_IM_MODULE</span><span class="o">=</span><span class="s2">"fcitx5"</span>
<span class="nb">export </span><span class="nv">XMODIFIERS</span><span class="o">=</span><span class="s2">"@im=fcitx5"</span>
<span class="nb">export </span><span class="nv">QT_QPA_PLATFORM</span><span class="o">=</span><span class="s2">"xcb"</span>
<span class="nb">export </span><span class="nv">GDK_BACKEND</span><span class="o">=</span><span class="s2">"x11"</span>
</pre></table></code></div></div><p>安装完成，启动 fcitx。可以在命令行输入</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>xfce4-appfinder
</pre></table></code></div></div><p>之后打 fcitx5，就可以启动。或者直接在命令行输入</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>fcitx5
</pre></table></code></div></div><h1 id="声音">声音</h1><p>Linux 的<a href="https://wiki.archlinux.org/title/Sound_system">声音系统</a>分两层，驱动和声音服务器(Sound Server)。驱动有两个选择，ALSA 和 OSS。ALSA Arch 安装自带，OSS 因为闭源过了一段时间整体上看赶不上 ALSA。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> pulseaudio pavucontrol
</pre></table></code></div></div><p>pulse audio 默认的配置在蓝牙设备连接之后不会自动切换到蓝牙设备，每次都需要打开 audio mixer 手动选。修改配置开启自动切换</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"load-module module-switch-on-connect"</span> | doas <span class="nb">tee</span> <span class="nt">-a</span> /etc/pulse/default.pa
</pre></table></code></div></div><p>重启 pulse audio 比较麻烦，可以登出一下重新进来。</p><h2 id="蓝牙"><span class="mr-2">蓝牙</span><a href="#蓝牙" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-Sy</span> bluez bluez-utils blueman
doas systemctl start bluetooth.service
doas systemctl <span class="nb">enable </span>bluetooth.service
yay <span class="nt">-S</span> pulseaudio-bluetooth
</pre></table></code></div></div><p>打开 bluetooth manager 会自动在面板上添加一个 widget。如果蓝牙是关闭状态搜索 bluetooth adapter 可以打开。</p><h2 id="jack-低延迟"><span class="mr-2">jack 低延迟</span><a href="#jack-低延迟" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> reaper-bin sws supercollider sc3-plugins jack2 mpv sox qjackctl pulseaudio-bluetooth pulseaudio-jack pulseaudio njconnect flac cadence alsa-firmware alsa-plugins alsa-utils

doas pacman <span class="nt">-S</span> realtime-privileges
doas groupadd realtime
doas usermod <span class="nt">-a</span> <span class="nt">-G</span> realtime <span class="nv">$USER</span>

<span class="nb">cat</span> /proc/sys/vm/swappiness
doas sysctl vm.swappiness<span class="o">=</span>10

yay <span class="nt">-S</span> tuned
doas systemctl start tuned.service

<span class="c"># Rule for when switching to battery</span>
<span class="nv">ACTION</span><span class="o">==</span><span class="s2">"change"</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">"power_supply"</span>, ATTR<span class="o">{</span><span class="nb">type</span><span class="o">}==</span><span class="s2">"Mains"</span>, ATTR<span class="o">{</span>online<span class="o">}==</span><span class="s2">"0"</span> RUN+<span class="o">=</span><span class="s2">"/usr/bin/tuned-adm profile laptop-battery-powersave"</span>
<span class="c"># Rule for when switching to AC</span>
<span class="nv">ACTION</span><span class="o">==</span><span class="s2">"change"</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">"power_supply"</span>, ATTR<span class="o">{</span><span class="nb">type</span><span class="o">}==</span><span class="s2">"Mains"</span>, ATTR<span class="o">{</span>online<span class="o">}==</span><span class="s2">"1"</span> RUN+<span class="o">=</span><span class="s2">"/usr/bin/tuned-adm profile latency-performance"</span>

<span class="nb">alias </span>cpu-max<span class="o">=</span><span class="s1">'tuned-adm profile latency-performance'</span>
<span class="nb">alias </span>cpu-balanced<span class="o">=</span><span class="s1">'tuned-adm profile balanced'</span>
<span class="nb">alias </span>cpu-min<span class="o">=</span><span class="s1">'tuned-adm profile laptop-battery-powersave'</span>

git clone https://codeberg.org/rtcqs/rtcqs.git
<span class="nb">cd </span>rtcqs
./rtcqs.py

</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>doas systemctl <span class="nt">--user</span> stop pulseaudio.socket
doas systemctl <span class="nt">--user</span> stop pulseaudio.service
doas systemctl start tuned.service

doas sysctl vm.swappiness<span class="o">=</span>10
<span class="nb">cat</span> /proc/sys/vm/swappiness

cpu-max

</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>doas systemctl stop tuned.service
doas systemctl <span class="nt">--user</span> start pulseaudio.socket
doas systemctl <span class="nt">--user</span> start pulseaudio.service

doas sysctl vm.swappiness<span class="o">=</span>60
<span class="nb">cat</span> /proc/sys/vm/swappiness

cpu-balanced
</pre></table></code></div></div><h1 id="shell">shell</h1><h2 id="zsh"><span class="mr-2">zsh</span><a href="#zsh" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> zsh
sh <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="si">)</span><span class="s2">"</span>
</pre></table></code></div></div><h2 id="快捷键"><span class="mr-2">快捷键</span><a href="#快捷键" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>在 app finder 里搜 keyboard 可以找到键盘设置，一些有用的快捷键</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>xfce4-terminal <span class="nt">--drop-down</span> <span class="c"># 从屏幕顶部滑下来一个命令行，比较方便，一般可能会设成Alt + `</span>
xfce4-appfinder <span class="c"># 打开程序搜索</span>
thunar <span class="c"># 文件浏览器</span>
xkill <span class="c"># 强制关闭，对付卡死的窗口</span>
</pre></table></code></div></div><p>还有一个设置在 window manager 里，正常关闭一个窗口也比较有用</p><h2 id="软件"><span class="mr-2">软件</span><a href="#软件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="百度网盘"><span class="mr-2">百度网盘</span><a href="#百度网盘" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>百度网盘有 deb 的包但是 debtap 过来跑不起来，这个包是 web 版的封装，有 4G 上传大小的限制。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> baidunetdisk-electron
</pre></table></code></div></div><p>另一个选择是 baidupcs，个人感觉在 Arch Linux 上比官方客户端好用</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> baidupcs
</pre></table></code></div></div><h3 id="微信"><span class="mr-2">微信</span><a href="#微信" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>deepin-wine-wechat 依赖 Multilib 里的一些 32 位库，Arch Linux 默认不搜索 Multilib，开了之后才能安装</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>doas vim /etc/pacman.conf
</pre></table></code></div></div><p>找到下面两行，把前面的 # 删掉</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c">#[multilib]</span>
<span class="c">#Include = /etc/pacman.d/mirrorlist</span>
</pre></table></code></div></div><p>之后更新本地仓库，安装微信</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>yay
yay <span class="nt">-S</span> deepin-wine-wechat <span class="c"># 之后一路回车选择默认就行</span>
</pre></table></code></div></div><p>在不用时间不同地点从腾讯下载微信可能得到的安装包不是完全相同的，通常哈希值校验失败不是大问题。下面这行安装可以跳过哈希校验</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> <span class="nt">--mflags</span> <span class="nt">--skipinteg</span> deepin-wine-wechat
</pre></table></code></div></div><h3 id="腾讯会议"><span class="mr-2">腾讯会议</span><a href="#腾讯会议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>是一个旧版本的腾讯会议 ubuntu 包，主要的缺点是不能接受别人在屏幕上标画，个人没有遇到其他使用上的问题。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> wemeet-bin
</pre></table></code></div></div><h2 id="压缩"><span class="mr-2">压缩</span><a href="#压缩" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="zip"><span class="mr-2">zip</span><a href="#zip" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> unzip zip
</pre></table></code></div></div><h3 id="conda"><span class="mr-2">conda</span><a href="#conda" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>从<a href="https://docs.conda.io/en/latest/miniconda.html">miniconda 官网</a>下载对应的安装脚本，比如 x86 的机器安装脚本应该叫 <code class="language-plaintext highlighter-rouge">Miniconda3-latest-Linux-x86_64.sh</code>。之后进行安装</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>bash <span class="o">[</span>刚下载的安装脚本]
</pre></table></code></div></div><div class="table-wrapper"><table><tbody><tr><td>按照指引安装就行。“Do you wish the installer to initialize Miniconda3 by running conda init? [yes<td>no]” 我会选 yes，启动比较方便。安装完成后需要退出当前的命令行重新开一个，看到 prompt 最前面有一个 (base) 就是安装成功了。</table></div><p>基本使用</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>conda create <span class="nt">-n</span> <span class="o">[</span>名字] <span class="nv">python</span><span class="o">=</span>3.9
conda activate <span class="o">[</span>名字]
</pre></table></code></div></div><h3 id="录屏"><span class="mr-2">录屏</span><a href="#录屏" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> simplescreenrecorder
</pre></table></code></div></div><h2 id="虚拟机"><span class="mr-2">虚拟机</span><a href="#虚拟机" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>安装 arch 之后没有一些腾讯会议之类的软件，可能偶尔会需要用一下 windows 虚拟机。做 Windows 虚拟机首先需要一个 Windows iso，可以从<a href="https://www.microsoft.com/en-us/software-download/windows10ISO">微软官网</a>或<a href="https://next.itellyou.cn/">msdn</a>下。msdn 的 BT 链接可以先用百度网盘的离线下载下到网盘里，之后下到本地。</p><p>host 这边选择用 qemu 做虚拟机，更新系统安装软件</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-Syy</span>
<span class="c"># 如果更新linux内核版本了需要重启才能生效</span>

doas pacman <span class="nt">-S</span> archlinux-keyring
doas pacman <span class="nt">-S</span> qemu virt-manager virt-viewer dnsmasq vde2 bridge-utils openbsd-netcat
doas pacman <span class="nt">-S</span> ebtables iptables
doas systemctl start libvirtd
</pre></table></code></div></div><p>默认 virt-manager 可能需要 root 权限才能运行，修改 /etc/libvirt/libvirtd.conf，让他可以在用户权限下运行</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>doas vi /etc/libvirt/libvirtd.conf

<span class="c"># unix_sock_group = "libvirt"</span>
<span class="c"># unix_sock_rw_perms = "0770"</span>

newgrp libvirt
doas usermod <span class="nt">-a</span> <span class="nt">-G</span> libvirt <span class="si">$(</span><span class="nb">whoami</span><span class="si">)</span>
</pre></table></code></div></div><p>之后打开 Virtual Machine Manager，按照提示一步一步安装即可。 <a href="#" title="TODO: non root access">//</a>: # (TODO:具体步骤截图)</p><p>安装好 windows 后 host 和 client 的剪切板是不能共享的，有时候可能不太方便。可以在 windows 里装一个 spice-guest-tools，host 上不需要额外装软件就可以实现双向剪切板共享。下载地址： https://www.spice-space.org/download.html</p><p><img data-src="/assets/img/post/Linux/spice-clipboard.png" alt="spice-clipboard" data-proofer-ignore></p><p>点那个 spice-guest-tools 下载，之后安装。</p><p>如果只是偶尔在 host 和 guest 之间传个文件那可以用<a href="sharedrop.io">sharedrop.io</a>这种局域网传文件的工具或者上网盘绕一圈。如果传的比较频繁可以考虑装一个 samba。windows 和 mac 都内置了对 samba 的支持，linux 的 host 需要安装和配置一下。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> samba <span class="c"># 安装samba</span>
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">cd</span> /etc/samba
doas vi smb.conf
</pre></table></code></div></div><p>arch 上安装 samba 不带默认的配置文件，打开这个官方的<a href="https://git.samba.org/samba.git/?p=samba.git;a=blob_plain;f=examples/smb.conf.default;hb=HEAD">配置文件样例</a>，粘到刚才 vi 的 smb.conf 里。</p><p>按照下面格式在文件末尾添加一个网络共享</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="o">[</span>smbarch]
comment <span class="o">=</span> smbarch
path <span class="o">=</span> /path/to/share <span class="c"># 这里一定要用绝对路径，相对的不行</span>
writable <span class="o">=</span> <span class="nb">yes
</span>browsable <span class="o">=</span> <span class="nb">yes
</span>create mask <span class="o">=</span> 0700
directory mask <span class="o">=</span> 0700
<span class="nb">read </span>only <span class="o">=</span> no
guest ok <span class="o">=</span> no
</pre></table></code></div></div><p>默认配置给的 log 路径是没有写入权限的，找到 log file 这一行改成下面这个路径</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>log file <span class="o">=</span> /var/log/samba/%m.log
</pre></table></code></div></div><p>最后添加 samba 用户组，创建要分享的目录并修改权限</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>doas groupadd <span class="nt">-r</span> smbuser
doas usermod <span class="nt">-aG</span> smbuser <span class="si">$(</span><span class="nb">whoami</span><span class="si">)</span>

doas smbpasswd <span class="nt">-a</span> lin

<span class="nb">mkdir</span> /path/to/share
doas <span class="nb">chown</span> <span class="nt">-R</span> :smbuser ~/Desktop/samba/
doas <span class="nb">chmod </span>1770 ~/Desktop/samba/
doas systemctl start smb
doas systemctl start nmb
</pre></table></code></div></div><p>之后在 windows 中右键我的电脑，点添加网络位置，地址按照 //ip/smbarch 这个格式写。host 的 ip 可以用 ip a 查到，不是环回的 127.0.0.1，而且是一个局域网地址，比如 192.168. …这种</p><p>添加成功后输入用户名密码就能看到文件了。</p><h1 id="手机">手机</h1><p>用 usb 在 Arch 和 Android 之间传文件需要 MTP(Media Transfer Protocol)的支持，Arch 默认是不装这个的。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> mtpfs jmtpfs gvfs-mtp <span class="c"># android 4+ 需要第二个包</span>
doas pacman <span class="nt">-Sy</span> gvfs-gphoto2 <span class="c"># 照片传输支持</span>
</pre></table></code></div></div><p>清理 arch</p><p>https://averagelinuxuser.com/clean-arch-linux/</p><p>重启文件浏览器</p><p>thunar -q &amp;&amp; thunar</p><p>https://linuxhint.com/guide_linux_audio/</p><h1 id="raid">raid</h1><p>fio –name TEST –eta-newline=5s –filename=temp.file –rw=read –size=100m –io_size=2g –blocksize=1024k –ioengine=libaio –fsync=10000 –iodepth=32 –direct=1 –numjobs=1 –runtime=60 –group_reporting</p><p>fio –name TEST –eta-newline=5s –filename=temp.file –rw=write –size=100m –io_size=2g –blocksize=1024k –ioengine=libaio –fsync=10000 –iodepth=32 –direct=1 –numjobs=1 –runtime=60 –group_reporting</p><p>fio –name TEST –eta-newline=5s –filename=temp.file –rw=read –size=100m –io_size=2g –blocksize=2k –ioengine=libaio –fsync=10000 –iodepth=32 –direct=1 –numjobs=1 –runtime=60 –group_reporting</p><p>fio –name TEST –eta-newline=5s –filename=temp.file –rw=write –size=100m –io_size=2g –blocksize=2k –ioengine=libaio –fsync=10000 –iodepth=32 –direct=1 –numjobs=1 –runtime=60 –group_reporting</p><h1 id="多内核">多内核</h1><p>Arch 默认的 Linux 内核叫 linux，这个内核一直是最新的。Arch 还有其他几个内核选择</p><ul><li>linux-lts：长期支持，版本旧一点，比 linux bug 少<li>linux-hardened：强调安全，一些包可能不能用<li>linux-zen：最新内核，经过微调。更强调低延迟，更耗电，throughput 比 linux 差</ul><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nb">uname</span> <span class="nt">-r</span> <span class="c"># 查看当前内核版本</span>

<span class="c"># 安装内核，用哪个装哪个</span>
doas pacman <span class="nt">-S</span> linux-lts
doas pacman <span class="nt">-S</span> linux-hardened
doas pacman <span class="nt">-S</span> linux-zen
doas grub-mkconfig <span class="nt">-o</span> /boot/grub/grub.cfg <span class="c"># 重新生成grub配置文件</span>
</pre></table></code></div></div><p>到这就完事了，切换内核需要重启，之后在 grub 界面进 advanced options，选想用的内核就行。</p><p>此外可以修改 grub 配置让 Arch 记住上次选择的内核，下次开机自动选择。</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>doas vim /etc/default/grub

<span class="c"># GRUB_DISABLE_SUBMENU=y # 禁用子菜单，所有内核都直接显示</span>
<span class="c"># GRUB_DEFAULT=saved # 默认上次选择的内核</span>
<span class="c"># GRUB_SAVEDEFAULT=true # 记录上次选择的内核</span>
doas grub-mkconfig <span class="nt">-o</span> /boot/grub/grub.cfg <span class="c"># 之后还是要重新生成grub配置文件</span>

</pre></table></code></div></div><p><img data-src="/assets/img/post/Linux/arch-advanced-options.png" alt="arch advanced options" data-proofer-ignore></p><p>参考：<a href="https://itsfoss.com/switch-kernels-arch-linux/">Different Types of Kernel for Arch Ldockinux and How to Use Them</a></p><h2 id="docker"><span class="mr-2">Docker</span><a href="#docker" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>doas pacman <span class="nt">-S</span> docker <span class="c"># 安装</span>
doas systemctl start docker.service <span class="c"># 启动</span>
<span class="c"># doas systemctl enable docker.service # 开机自启</span>
doas usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span> <span class="c"># 添加组</span>
</pre></table></code></div></div><p>完全删除</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">rm</span> <span class="nt">-rf</span> /var/lib/docker
yay <span class="nt">-R</span> docker
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>FROM ubuntu

ARG <span class="nv">USERNAME</span><span class="o">=</span>lin
ARG <span class="nv">USER_UID</span><span class="o">=</span>1000
ARG <span class="nv">USER_GID</span><span class="o">=</span><span class="nv">$USER_UID</span>

<span class="c"># Create the user</span>
RUN groupadd <span class="nt">--gid</span> <span class="nv">$USER_GID</span> <span class="nv">$USERNAME</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> useradd <span class="nt">--uid</span> <span class="nv">$USER_UID</span> <span class="nt">--gid</span> <span class="nv">$USER_GID</span> <span class="nt">-m</span> <span class="nv">$USERNAME</span> <span class="se">\</span>
    <span class="c">#</span>
    <span class="c"># [Optional] Add sudo support. Omit if you don't need to install software after connecting.</span>
    <span class="o">&amp;&amp;</span> apt-get update <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> <span class="nb">sudo</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$USERNAME</span> <span class="nv">ALL</span><span class="o">=</span><span class="se">\(</span>root<span class="se">\)</span> NOPASSWD:ALL <span class="o">&gt;</span> /etc/sudoers.d/<span class="nv">$USERNAME</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> <span class="nb">chmod </span>0440 /etc/sudoers.d/<span class="nv">$USERNAME</span>

<span class="c"># ********************************************************</span>
<span class="c"># * Anything else you want to do like clean up goes here *</span>
<span class="c"># ********************************************************</span>

<span class="c"># [Optional] Set the default user. Omit if you want to keep the default as root.</span>
USER <span class="nv">$USERNAME</span>

</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> nvidia-container-toolkit
docker build <span class="nb">.</span> <span class="nt">-t</span> cuda
</pre></table></code></div></div><p>查看 cuda 版本</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nvcc <span class="nt">--version</span>
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>docker pull
docker image <span class="nb">ls
</span>docker run
docker ps
docker restart
docker stop
docker commit <span class="o">[</span>CONTAINER ID] <span class="o">[</span>new name]
</pre></table></code></div></div><p><a href="https://github.com/HarGit14/dorowu-docker-ubuntu-vnc-desktop">gui docker</a></p><h1 id="zram">zram</h1><p><code class="language-plaintext highlighter-rouge">/etc/systemd/zram-generator.conf</code></p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="o">[</span>zram0]
zram-size <span class="o">=</span> ram / 2
<span class="o">[</span>zram1]
zram-size <span class="o">=</span> ram / 2
<span class="o">[</span>zram2]
zram-size <span class="o">=</span> ram / 2
<span class="o">[</span>zram3]
zram-size <span class="o">=</span> ram / 2
</pre></table></code></div></div><h1 id="prime">Prime</h1><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>yay <span class="nt">-S</span> nvidia-prime
prime-run steam
</pre></table></code></div></div><h1 id="rclone">rclone</h1><p>rclone listremotes</p><p>rclone rcd –rc-web-gui –rc-pass [password]</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/linux/'>Linux</a>, <a href='/categories/arch/'>Arch</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >Linux</a> <a href="/tags/arch/" class="post-tag no-text-decoration" >Arch</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> All Rights Reserved.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Arch常用软件 - Lin&#39;s Blog&amp;url=https://linhandev.github.io//posts/Arch-Apps/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Arch常用软件 - Lin&#39;s Blog&amp;u=https://linhandev.github.io//posts/Arch-Apps/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://linhandev.github.io//posts/Arch-Apps/&amp;text=Arch常用软件 - Lin&#39;s Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Medical-Dataset/">医学影像数据集集锦</a><li><a href="/posts/Liver-CT/">腹部CT</a><li><a href="/posts/Application-Layer/">应用层</a><li><a href="/posts/management-security/">管理和安全</a><li><a href="/posts/Arch-Apps/">Arch常用软件</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/note/">Note</a> <a class="post-tag" href="/tags/iap/">IAP</a> <a class="post-tag" href="/tags/med/">Med</a> <a class="post-tag" href="/tags/arch/">Arch</a> <a class="post-tag" href="/tags/tumor/">Tumor</a> <a class="post-tag" href="/tags/abdominal/">Abdominal</a> <a class="post-tag" href="/tags/atom/">Atom</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/centos/">Centos</a> <a class="post-tag" href="/tags/ct/">CT</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Arch-Install/"><div class="card-body"> <em class="timeago small" data-ts="1631203200" > 2021-09-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Arch Linux安装</h3><div class="text-muted small"><p> Arch是一个十分干净简洁的Linux发行版，日常使用不吃硬件十分流畅。采用滚动更新方式，安装之后更新就行，没有类似重装的升级，个人感觉很适合实验室这种多人共用机器的场景。Arch的社区可能是一众Linux发行版中最好的。Arch Wiki基本能解答所有系统相关的问题，里面的内容对于一些Arch下游的Linux发行版(比如Manjaro)也是有用的。AUR(Arch User Resposi...</p></div></div></a></div><div class="card"> <a href="/posts/Centos-env-setup/"><div class="card-body"> <em class="timeago small" data-ts="1609860136" > 2021-01-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Centos环境配置</h3><div class="text-muted small"><p> Centos是基于RedHat Enterprise Linux开源的一个Linux distro，以极高的稳定性闻名。这个Post讲解将Centos作为服务器，安装软件和进行配置的技巧。 虚拟化 一些软件（比如mailcow）可能会对服务器的虚拟化技术有要求，用 virt-what 命令可以推断服务器用的是什么虚拟化技术。一般有要求的都会明确提出来，否则大概就是没...</p></div></div></a></div><div class="card"> <a href="/posts/Mail/"><div class="card-body"> <em class="timeago small" data-ts="1660665600" > 2022-08-17 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Mail</h3><div class="text-muted small"><p> https://github.com/docker-mailserver/docker-mailserver#usage DMS_GITHUB_URL=’https://raw.githubusercontent.com/docker-mailserver/docker-mailserver/master’ wget “${DMS_GITHUB_URL}/docker-compose.ym...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/management-security/" class="btn btn-outline-primary" prompt="Older"><p>管理和安全</p></a> <a href="/posts/ML/" class="btn btn-outline-primary" prompt="Newer"><p>机器学习笔记</p></a></div><script src="https://utteranc.es/client.js" repo="linhandev/linhandev.github.io" issue-term="pathname" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/linhandev">Lin</a>. <span data-toggle="tooltip" data-placement="top" title="博客内容禁止任何形式转载，尤其到CSDN">All Rights Reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/note/">Note</a> <a class="post-tag" href="/tags/iap/">IAP</a> <a class="post-tag" href="/tags/med/">Med</a> <a class="post-tag" href="/tags/arch/">Arch</a> <a class="post-tag" href="/tags/tumor/">Tumor</a> <a class="post-tag" href="/tags/abdominal/">Abdominal</a> <a class="post-tag" href="/tags/atom/">Atom</a> <a class="post-tag" href="/tags/blog/">Blog</a> <a class="post-tag" href="/tags/centos/">Centos</a> <a class="post-tag" href="/tags/ct/">CT</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
